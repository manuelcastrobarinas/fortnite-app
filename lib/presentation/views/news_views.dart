import 'package:flutter/material.dart';
import '../../models/news/news.dart';


final List<News> newsList = [
  News(id: "2",title: "Ariete propulsor", tabTitle: "Ariete propulsor", date: DateTime.now(),body: "Haz una entrada temeraria y ábrete paso a través de las defensas enemigas con el ariete propulsor! Derriba muros y alcanza nuevas alturas, ya que la huida perfecta está a solo un salto de cohete de distancia.",adspace: "",image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f941f5e5d0e7917d7139c7e88bce0f5dea28-2b1f445e-5eba-4729-ab94-1b1ca311b8b5.jpeg?width=1920",live: false,video: null),
  News(  
    id: "c3a9fdb6-76be-4a0f-9eb4-bc49159c40ac",
    title: "Granadas rompescudos",
    tabTitle: "Granadas rompescudos",
    date: DateTime.now(),
    body: "¡Deshabilita dispositivos por todo lo alto! Lanza una granada rompescudos para infligir daño a escudos y atravesar las defensas enemigas. Utiliza la granada para desactivar torretas, cámaras, vehículos y mucho más.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f9416d90dfc1e413571ba1b204384519cd324dbb76fe7c7ec557acae42abba424ad7-82c22b2e-d9b9-4141-bf71-5f7c5ca42e7e.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "778febb8-02d6-4eb9-81b6-e279665c0dd0",
    title: "Medallas de superviviente",
    tabTitle: "Medallas de superviviente",
    date: DateTime.timestamp(),
    body: "¡Completa misiones de superviviente sobreviviendo a tus oponentes y consiguiendo eliminaciones! Mantente con vida para mejorar tu medalla de superviviente.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/e9f9f46118224303d57d6ba25ea27856a078e18418778b768979b4dd5b55036c3c404becc7b828678946b4561474ed019632431a29871cd78daf6cb0ebc8a8bf-f2b2cceb-e608-413e-8a9a-c897f0b20979.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(id: "2",title: "Ariete propulsor", tabTitle: "Ariete propulsor", date: DateTime.now(),body: "Haz una entrada temeraria y ábrete paso a través de las defensas enemigas con el ariete propulsor! Derriba muros y alcanza nuevas alturas, ya que la huida perfecta está a solo un salto de cohete de distancia.",adspace: "",image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f941f5e5d0e7917d7139c7e88bce0f5dea28-2b1f445e-5eba-4729-ab94-1b1ca311b8b5.jpeg?width=1920",live: false,video: null),
  News(  
    id: "c3a9fdb6-76be-4a0f-9eb4-bc49159c40ac",
    title: "Granadas rompescudos",
    tabTitle: "Granadas rompescudos",
    date: DateTime.now(),
    body: "¡Deshabilita dispositivos por todo lo alto! Lanza una granada rompescudos para infligir daño a escudos y atravesar las defensas enemigas. Utiliza la granada para desactivar torretas, cámaras, vehículos y mucho más.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f9416d90dfc1e413571ba1b204384519cd324dbb76fe7c7ec557acae42abba424ad7-82c22b2e-d9b9-4141-bf71-5f7c5ca42e7e.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "778febb8-02d6-4eb9-81b6-e279665c0dd0",
    title: "Medallas de superviviente",
    tabTitle: "Medallas de superviviente",
    date: DateTime.timestamp(),
    body: "¡Completa misiones de superviviente sobreviviendo a tus oponentes y consiguiendo eliminaciones! Mantente con vida para mejorar tu medalla de superviviente.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/e9f9f46118224303d57d6ba25ea27856a078e18418778b768979b4dd5b55036c3c404becc7b828678946b4561474ed019632431a29871cd78daf6cb0ebc8a8bf-f2b2cceb-e608-413e-8a9a-c897f0b20979.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(id: "2",title: "Ariete propulsor", tabTitle: "Ariete propulsor", date: DateTime.now(),body: "Haz una entrada temeraria y ábrete paso a través de las defensas enemigas con el ariete propulsor! Derriba muros y alcanza nuevas alturas, ya que la huida perfecta está a solo un salto de cohete de distancia.",adspace: "",image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f941f5e5d0e7917d7139c7e88bce0f5dea28-2b1f445e-5eba-4729-ab94-1b1ca311b8b5.jpeg?width=1920",live: false,video: null),
  News(  
    id: "c3a9fdb6-76be-4a0f-9eb4-bc49159c40ac",
    title: "Granadas rompescudos",
    tabTitle: "Granadas rompescudos",
    date: DateTime.now(),
    body: "¡Deshabilita dispositivos por todo lo alto! Lanza una granada rompescudos para infligir daño a escudos y atravesar las defensas enemigas. Utiliza la granada para desactivar torretas, cámaras, vehículos y mucho más.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/b9484322a8f10b226ee90f91acb5f9416d90dfc1e413571ba1b204384519cd324dbb76fe7c7ec557acae42abba424ad7-82c22b2e-d9b9-4141-bf71-5f7c5ca42e7e.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "778febb8-02d6-4eb9-81b6-e279665c0dd0",
    title: "Medallas de superviviente",
    tabTitle: "Medallas de superviviente",
    date: DateTime.timestamp(),
    body: "¡Completa misiones de superviviente sobreviviendo a tus oponentes y consiguiendo eliminaciones! Mantente con vida para mejorar tu medalla de superviviente.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/e9f9f46118224303d57d6ba25ea27856a078e18418778b768979b4dd5b55036c3c404becc7b828678946b4561474ed019632431a29871cd78daf6cb0ebc8a8bf-f2b2cceb-e608-413e-8a9a-c897f0b20979.jpeg?width=1920",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
  News(  
    id: "d2d07e5e-e4b5-4dc6-a2b8-adcbcc876f08",
    title: "Star Wars",
    tabTitle: "Star Wars",
    date: DateTime.timestamp(),
    body: "Abraza el Lado Oscuro, recorre la galaxia como cazarrecompensas o lucha por el Lado Luminoso de la Fuerza.",
    adspace: "",
    image: "https://cdn-live.prm.ol.epicgames.com/prod/21ee7b16d52cba48520cdd7f2a1048056f42c3bfabc82b900b7d0b8a6be1da5f3bff75b736fee37fb72a075d9cfbd006-924f75c5-5eaf-456a-b1a8-719a4c1a1423.jpeg",
    live: false,
    video: null
  ),
];

class NewsView extends StatelessWidget {
  const NewsView({super.key});

  @override
  Widget build(BuildContext context) {
    final News news= newsList[0];
    final String cleanURL = '${news.image!.split('.jpeg')[0]}.jpeg';

    const TextStyle titleStyle = TextStyle(color: Colors.white, fontSize: 80);
    return  Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Expanded(
          flex: 4,
          child: Stack(
            children: [
              ClipRRect(
                borderRadius: const BorderRadius.only(bottomLeft: Radius.circular(30.0), bottomRight: Radius.circular(30.0)),
                child: Opacity(
                  opacity: 0.9,
                  child: SizedBox(
                    height: double.infinity,
                    width : double.infinity,
                    child: FadeInImage(
                      fit: BoxFit.fill,
                      placeholder: const AssetImage("assets/loading/load.gif"), 
                      image: NetworkImage(cleanURL)
                    ),
                  ),
                ),
              ),
              Container(
                height: double.infinity,
                width : double.infinity,
                decoration: const BoxDecoration(
                  color: Colors.black26,
                  borderRadius: BorderRadiusDirectional.vertical(bottom: Radius.circular(30.0))
                ),
              ),
              const Padding(
                padding: EdgeInsets.symmetric(vertical: 20.0),
                child: Align(
                  alignment: Alignment.topCenter, // Posiciona en la parte inferior
                  child: Text('FORTNITE', style: titleStyle, maxLines: 1, overflow: TextOverflow.ellipsis)
                ),
              ),
              Align(
                alignment: Alignment.bottomLeft,
                child: Padding(
                  padding: const EdgeInsets.all(10.0),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.end,
                    mainAxisAlignment: MainAxisAlignment.start,
                    mainAxisSize: MainAxisSize.min, //ESTO HACE QUE EL COLUMN INTENTE OCUPAR EL MINIMO ESPACIO EN VEZ DE INTENTAR OCUPAR EL MAXIMO QUE ES SU COMPORTAMIENTO POR DEFECTO
                    children: [
                      _Title(title: news.title),
                      _DateContainer(date: news.date!),
                      _Description(description: news.body),
                    ],
                  ),
                )
              ),
            ],
          ),
        ),
        Expanded(
          flex: 1,
          child: Container(
            padding: const EdgeInsets.all(10.0),
            child: ListView.builder(
              itemCount: newsList.length,
              scrollDirection: Axis.horizontal,
              itemBuilder: (BuildContext context, int i) {
                final News noticias = newsList[i];  
                final String cleanURL2 = '${noticias.image!.split('.jpeg')[0]}.jpeg';
                return  Container(
                  width : MediaQuery.of(context).size.width * 0.3, // Ancho de cada ítem
                  margin: const EdgeInsets.symmetric(horizontal: 5.0),
                  decoration: BoxDecoration(
                    border: Border.all(color: Colors.white),
                    borderRadius: BorderRadius.circular(10.0),
                  ),
                  child: ClipRRect(
                    borderRadius: BorderRadius.circular(10.0),
                    child: FadeInImage(
                      fit: BoxFit.fill,
                      placeholder: const AssetImage("assets/loading/load.gif"), 
                      image: NetworkImage(cleanURL2)
                    ),
                  ),
                );
              }
            ),
          ),
        ),
      ],
    );
  }
}

class _DateContainer extends StatelessWidget {
  final DateTime date;

  const _DateContainer({
    required this.date,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      margin: const EdgeInsets.symmetric(horizontal: 10.0),
      width : double.infinity,
      child : Align(
        alignment: Alignment.centerLeft,
        child: Text('$date', style: const TextStyle(color: Colors.white, fontSize: 18, overflow: TextOverflow.ellipsis), maxLines: 1),
      ),
    );
  }
}

class _Title extends StatelessWidget {
  final String title;

  const _Title({
    required this.title,
  });

  @override
  Widget build(BuildContext context) {
  return Container(
    margin: const EdgeInsets.all(5.0),
    width : double.infinity,
    child : Padding(
      padding: const EdgeInsets.all(5.0),
        child: Text(title, style: const TextStyle(color: Colors.white, fontSize: 32, overflow: TextOverflow.ellipsis), maxLines: 1),
      ),
    );
  }
}

class _Description extends StatelessWidget {
  final String description;

  const _Description({
    required this.description,
  });

  @override
  Widget build(BuildContext context) {
  return Container(
    margin: const EdgeInsets.all(5.0),
    width : double.infinity,
    child : Padding(
      padding: const EdgeInsets.all(5.0),
        child: Text(description, style: const TextStyle(color: Colors.white, fontSize: 18, overflow: TextOverflow.ellipsis), maxLines: 6),
      ),
    );
  }
}